<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>中国加油！</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/css/bootstrap-combined.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
        #pic1 {
            height: 100%;
            width: 100%;
            min-height: 150px;
        }
        .zc-ref {
            display: none;
        }
 
        zing-grid[loading] {
            height: 450px;
        }
    </style>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/css/bootstrap-responsive.min.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons 
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
-->
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">2019-nCov Shanghai</a>
  <!--         <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#link1">Link 2</a></li>
              <li><a href="#link2">Link 3</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1>上海</h1>

    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto">
<div id="pic1" style="height: 300px">
    </div>
<div id="pic2"  style="height: 300px">
    </div>
<table id="tbdetail" class="table">
<thead>
<tr>
<!--<th scope="col">日期</th>
<th scope="col">新增</th>
<th scope="col">确诊</th>
<th scope="col">疑似</th>
<th scope="col">排除疑似</th>
<th scope="col">治愈</th>
<th scope="col">死亡</th>-->
</tr> 
</thead>
<tbody>
<!-- <tr><th scope="row">1/20</td><td>6</td><td>6</td><td>3</td><td></td><td></td><td></td></tr>
<tr><th scope="row">1/21</td><td>3</td><td>9</td><td>10</td><td></td><td></td><td></td></tr>
<tr><th scope="row">1/22</td><td>7</td><td>16</td><td>22</td><td></td><td></td><td></td></tr>
<tr><th scope="row">1/23</td><td>4</td><td>20</td><td>34</td><td></td><td></td><td></td></tr>
<tr><th scope="row">1/24</td><td>13</td><td>33</td><td>72</td><td></td><td>1</td><td></td></tr>
<tr><th scope="row">1/25</td><td>7</td><td>40</td><td>95</td><td></td><td>1</td><td></td></tr>
<tr><th scope="row">1/26</td><td>13</td><td>53</td><td>90</td><td>57</td><td>1</td><td>1</td></tr>
<tr><th scope="row">1/27</td><td>13</td><td>66</td><td>129</td><td>75</td><td>3</td><td>1</td></tr>
<tr><th scope="row">1/28</td><td>14</td><td>80</td><td>167</td><td>99</td><td>4</td><td>1</td></tr>
<tr><th scope="row">1/29</td><td>21</td><td>101</td><td>180</td><td>145</td><td>5</td><td>1</td></tr>
<tr><th scope="row">1/30</td><td>27</td><td>128</td><td>164</td><td>225</td><td>5</td><td>1</td></tr>
<tr><th scope="row">1/31</td><td>25</td><td>153</td><td>167</td><td>296</td><td>9</td><td>1</td></tr>
<tr><th scope="row">2/1</td><td>24</td><td>177</td><td>168</td><td>374</td><td>10</td><td>1</td></tr>
<tr><th scope="row">2/2</td><td>16</td><td>193</td><td>173</td><td>449</td><td>10</td><td>1</td></tr>
<tr><th scope="row">2/3</td><td>15</td><td>208</td><td>168</td><td>523</td><td>10</td><td>1</td></tr>
<tr><th scope="row">2/4</td><td>25</td><td>233</td><td>194</td><td>585</td><td>12</td><td>1</td></tr>
<tr><th scope="row">2/5</td><td>22</td><td>254</td><td>196</td><td>664</td><td>15</td><td>1</td></tr>
<tr><th scope="row">2/6</td><td>3</td><td>257</td><td>238</td><td>676</td><td>25</td><td>1</td></tr> -->
</tbody></table>
    </div>


    ​
    <hr> 
	<footer class="footer">
	  <!--  <p class="pull-left">&copy; NetDNA 2012</p>
	   <p class="pull-right"><a href="#">Back to top</a></p> -->
	</footer>
    </div> <!--end container-->
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>-->
    <link rel = "stylesheet" href = "https://s0.pstatp.com/cdn/expire-1-M/jquery-mobile/1.4.5/jquery.mobile.min.css">
    <script src = "https://s3.pstatp.com/cdn/expire-1-M/jquery/3.4.0/jquery.min.js"></script>
    <script src = "https://s3.pstatp.com/cdn/expire-1-M/jquery-mobile/1.4.5/jquery.mobile.min.js"></script>
    <!-- <script type="text/javascript" src="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.js"></script>
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.min.css">
	<script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script> -->
    <script src="https://s1.pstatp.com/cdn/expire-1-M/zingchart/2.8.6/zingchart.min.js"></script>
     <script>

    $(document).ready(function() {
        var d = null;
        $.ajax({url: "http://zhuzisheng.github.io/shanghai.csv", 
                success: function(data) {
                            console.log("test");
                            d = data;;
                            },
                async: false});
        console.log(d);
   
        var lines = d.split("\n");
        var cols = lines[0].split(",");
        for(var i=0; i<cols.length; i++) {
            $("#tbdetail thead tr").append("<th scope=\"col\">" + cols[i] + "</th>");
        }
        for (var i=1; i<lines.length; i++) {
            var line = lines[i];
            var data = line.split(",");
            var l = "<tr>";
            for(var j=0; j<data.length; j++) {
                if(j===0) {
                    l += "<th scope=\"row\">" + data[j]  + "</th>";

                }else {
                    l += "<td>" + data[j]  + "</td>";
                } 
            }
            l += "</tr>"
            $("#tbdetail tbody").append(l);
        }
        sdata = [];
        sdata1 = [];
        sdata2 = [];
        for(var i=1; i<lines.length; i++) {
            var data = lines[i].split(',');
            if(data[0] != "") {
                var date = data[0].split('/');
                console.log(date);
                date = Date.UTC(2020, parseInt(date[0]) - 1, parseInt(date[1]))
                sdata.push([date, parseInt(data[1])]); 
                sdata1.push([date, parseInt(data[2])]);
                sdata2.push([date, parseInt(data[3])]);
            }
        }

        ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9", "b55b025e438fa8a98e32482b5f768ff5"];
        var myConfig = {
            "type": "line",
            "utc": true,
            "title": {
                "text": "每日新增病例",
                "font-size": "24px",
                "adjust-layout": true
            },
            "plotarea": {
                "margin": "dynamic 45 60 dynamic",
            },
            "legend": {
                "layout": "float",
                "background-color": "none",
                "border-width": 0,
                "shadow": 0,
                "align": "center",
                "adjust-layout": true,
                "toggle-action": "remove",
                "item": {
                    "padding": 7,
                    "marginRight": 17,
                    "cursor": "hand"
                }
            },
            "scale-x": {
                "transform": {
                    "type": "date",
                    "all": "%m/%d",
                    "guide": {
                        "visible": false
                    },
                    "item": {
                        "visible": false
                    }
                },
                "label": {
                    "visible": false
                },
            },
            "scale-y": {
                "line-color": "#f6f7f8",
                "shadow": 0,
                "guide": {
                    "line-style": "dashed"
                },
                "label": {
                    "text": "人数",
                },
                "thousands-separator": ","
            },
            "crosshair-x": {
                "line-color": "#efefef",
                "plot-label": {
                    "border-radius": "5px",
                    "border-width": "1px",
                    "border-color": "#f6f7f8",
                    "padding": "10px",
                    "font-weight": "bold"
                },
                "scale-label": {
                    "font-color": "#000",
                    "background-color": "#f6f7f8",
                    "border-radius": "5px"
                }
            },
            "tooltip": {
                "visible": false
            },
            "plot": {
                "highlight": true,
                "tooltip-text": "%t views: %v",
                "shadow": 0,
                "line-width": "2px",
                "marker": {
                    "type": "circle",
                    "size": 3
                },
                "highlight-state": {
                    "line-width": 3
                },
                "animation": {
                    "effect": 1,
                    "sequence": 2,
                    "speed": 100,
                }
            },
            "series": [{
                    "values": sdata,
                    aspect: "spline",
                    "text": "新增",
                    "line-color": "#007790",
                    "legend-item": {
                        "background-color": "#007790",
                        "borderRadius": 5,
                        "font-color": "white"
                    },
                    "legend-marker": {
                        "visible": false
                    },
                    "marker": {
                        "background-color": "#007790",
                        "border-width": 1,
                        "shadow": 0,
                        "border-color": "#69dbf1"
                    },
                    "highlight-marker": {
                        "size": 6,
                        "background-color": "#007790",
                    }
                }
            ]
        };
 
        zingchart.render({
            id: 'pic1',
            data: myConfig,
            height: '100%',
            width: '100%'
        });
        var myconfig2 = {
            type: "mixed", // 1. Specify your mixed chart type.
            "title": {
                "text": "确诊 + 疑似",
                "font-size": "24px",
                "adjust-layout": true
            },
            plot: {
              "tooltip-text": "%t: %v",
            },
            "legend": {
                "layout": "float",
                "background-color": "none",
                "border-width": 0,
                "shadow": 0,
                "align": "center",
                "adjust-layout": true,
                "toggle-action": "remove",
                "item": {
                    "padding": 7,
                    "marginRight": 17,
                    "cursor": "hand"
                }
            },
            "scale-x": {
                "transform": {
                    "type": "date",
                    "all": "%m/%d",
                    "guide": {
                        "visible": false
                    },
                    "item": {
                        "visible": false
                    }
                },
                "label": {
                    "visible": false
                },
                "minor-ticks": "1day"
            },
            series: [ // 2. Specify the chart type for each series object.
              {
                type: "bar",
                values: sdata1,
                "width": "100%", 
                text: "确诊"
              },
              {
                type: 'line',
                values: sdata2,
                aspect: "spline",
                text: "疑似"
              }
            ]
        };
        zingchart.render({
            id: 'pic2',
            data: myconfig2,
            height: '100%',
            width: '100%'
        })
    }); 
    
	</script>


  </body>
</html>
